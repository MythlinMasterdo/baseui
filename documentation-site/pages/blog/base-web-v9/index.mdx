import {withStyle} from 'baseui';
import {Block} from 'baseui/block';
import {
  Table,
  StyledTable,
  StyledHead,
  StyledHeadCell,
  StyledBody,
  StyledRow,
  StyledCell,
} from 'baseui/table';

import metadata from './metadata.json';
import Layout from '../../../components/layout';
import {BlogImage, Meta, Caption} from '../../../components/blog';

export default Layout;

<Meta data={metadata} />

<BlogImage
  src="/static/images/blog/style-updates/baseblack.png"
  alt="updated base web components with black highlights"
  caption="Base Web has an updated look"
/>

## Migration Guide

After bumping to **v9**, your app will look a little different. Grays will be darker and type will be larger. Input highlights and buttons will be black rather than blue. _Don't panic!_ If you address each of the points below your app will look right in no time!

- Replace direct usage of gray scale (`$theme.colors.mono100` for example) with new values. Make sure to look for references in `Block` as well. [Read more ðŸ“–](#light-theme-mapping)
- Replace direct usage of typographic scale (`$theme.typography.font100` for example) with new values. Make sure to look for references in `Block` as well. [Read more ðŸ“–](#typography-mapping)
- Update any usage of typography components (`Paragraph`, `Caption`) as needed. [Read more ðŸ“–](#typography-components)
- If some of the changes in **v9** are not to your liking, customize your theme with some of the new theme properties available. [Read more ðŸ“–](#v8-theme-values)

Read below to find out exactly what has changed and how you can safely incorporate these changes into your codebase.

## Base Color Palette

The base color primitives for both the default light and dark theme have been adjusted. These have been changed to improve the contrast ratios across our color palette.

The changes in most of the colorways are quite subtle, but the gray (mono) palette has shifted more noticeably. Here are the updated grayscale values:

### Light Theme Changes

<StyledTable>
  <StyledHead>
    <StyledHeadCell>Primitive</StyledHeadCell>
    <StyledHeadCell>Old</StyledHeadCell>
    <StyledHeadCell>New</StyledHeadCell>
  </StyledHead>
  <StyledBody>
    {[
      ['mono50', '-', '#F6F6F6'],
      ['mono100', '#FFFFFF', '#EEEEEE'],
      ['mono200', '#F7F7F7', '#E2E2E2'],
      ['mono300', '#F0F0F0', '#CBCBCB'],
      ['mono400', '#E5E5E5', '#AFAFAF'],
      ['mono500', '#CCCCCC', '#757575'],
      ['mono600', '#B3B3B3', '#545454'],
      ['mono700', '#999999', '#333333'],
      ['mono800', '#666666', '#272727'],
      ['mono900', '#333333', '#1F1F1F'],
      ['mono1000', '#000000', '#141414'],
    ].map((row, index) => {
      const StyledColorCellOld = withStyle(StyledCell, {
        backgroundColor: row[1],
        color: index > 6 ? 'white' : 'black',
      });
      const StyledColorCellNew = withStyle(StyledCell, {
        backgroundColor: row[2],
        color: index > 4 ? 'white' : 'black',
      });
      return (
        <StyledRow key={index}>
          <StyledCell>{row[0]}</StyledCell>
          <StyledColorCellOld>{row[1]}</StyledColorCellOld>
          <StyledColorCellNew>{row[2]}</StyledColorCellNew>
        </StyledRow>
      );
    })}
  </StyledBody>
</StyledTable>

### Dark Theme Changes

<StyledTable>
  <StyledHead>
    <StyledHeadCell>Primitive</StyledHeadCell>
    <StyledHeadCell>Old</StyledHeadCell>
    <StyledHeadCell>New</StyledHeadCell>
  </StyledHead>
  <StyledBody>
    {[
      ['mono50', '-', '#F6F6F6'],
      ['mono100', '#CCCCCC', '#EEEEEE'],
      ['mono200', '#999999', '#E2E2E2'],
      ['mono300', '#7A7A7A', '#CBCBCB'],
      ['mono400', '#5C5C5C', '#AFAFAF'],
      ['mono500', '#3D3D3D', '#757575'],
      ['mono600', '#292929', '#545454'],
      ['mono700', '#1F1F1F', '#333333'],
      ['mono800', '#141414', '#272727'],
      ['mono900', '#111111', '#1F1F1F'],
      ['mono1000', '#000000', '#141414'],
    ].map((row, index) => {
      const StyledColorCellOld = withStyle(StyledCell, {
        backgroundColor: row[1],
        color: index > 2 ? 'white' : 'black',
      });
      const StyledColorCellNew = withStyle(StyledCell, {
        backgroundColor: row[2],
        color: index > 4 ? 'white' : 'black',
      });
      return (
        <StyledRow key={index}>
          <StyledCell>{row[0]}</StyledCell>
          <StyledColorCellOld>{row[1]}</StyledColorCellOld>
          <StyledColorCellNew>{row[2]}</StyledColorCellNew>
        </StyledRow>
      );
    })}
  </StyledBody>
</StyledTable>

<Caption>
  Note, the primitives for light and dark are identical now (as you can see on
  the right-most column for both tables). Both primitives are still being
  exported for backward compatibility. In a future major we may remove this
  redundancy.
</Caption>

The new grayscale does not mean everything is now two shades darker. We have shifted our use of grays across all of Base Web's components to keep the values consistent. However, if you access the gray values on the theme object directly you may need to update your code.

The following is a suggested mapping of old to new theme properties based on the closest matching color:

### Light Theme Mapping

<StyledTable>
  <StyledHead>
    <StyledHeadCell>Old</StyledHeadCell>
    <StyledHeadCell>New</StyledHeadCell>
  </StyledHead>
  <StyledBody>
    {[
      ['mono100', 'white', '#FFFFFF'],
      ['mono200', 'mono50', '#F7F7F7'],
      ['mono300', 'mono100', '#F0F0F0'],
      ['mono400', 'mono200', '#E5E5E5'],
      ['mono500', 'mono300', '#CCCCCC'],
      ['mono600', 'mono400', '#B3B3B3'],
      ['mono700', 'mono500', '#999999'],
      ['mono800', 'mono600', '#666666'],
      ['mono900', 'mono700', '#333333'],
      ['mono1000', 'black', '#000000'],
    ].map((row, index) => {
      const StyledColorCellOld = withStyle(StyledCell, props => {
        return {
          backgroundColor: row[2],
          color: index > 5 ? 'white' : 'black',
        };
      });
      const StyledColorCellNew = withStyle(StyledCell, props => {
        return {
          backgroundColor: props.$theme.colors[row[1]],
          color: index > 5 ? 'white' : 'black',
        };
      });
      return (
        <StyledRow key={index}>
          <StyledColorCellOld>{row[0]}</StyledColorCellOld>
          <StyledColorCellNew>{row[1]}</StyledColorCellNew>
        </StyledRow>
      );
    })}
  </StyledBody>
</StyledTable>

### Dark Theme Mapping

<StyledTable>
  <StyledHead>
    <StyledHeadCell>Old</StyledHeadCell>
    <StyledHeadCell>New</StyledHeadCell>
  </StyledHead>
  <StyledBody>
    {[
      [`mono100`, `mono300`, '#CCCCCC'],
      [`mono200`, `mono400`, '#999999'],
      [`mono300`, `mono500`, '#7A7A7A'],
      [`mono400`, `mono600`, '#5C5C5C'],
      [`mono500`, `mono700`, '#3D3D3D'],
      [`mono600`, `mono800`, '#292929'],
      [`mono700`, `mono900`, '#1F1F1F'],
      [`mono800`, `mono900`, '#141414'],
      [`mono900`, `mono900`, '#111111'],
      [`mono1000`, `black`, '#000000'],
    ].map((row, index) => {
      const StyledColorCellOld = withStyle(StyledCell, props => {
        return {
          backgroundColor: row[2],
          color: index > 1 ? 'white' : 'black',
        };
      });
      const StyledColorCellNew = withStyle(StyledCell, props => {
        return {
          backgroundColor: props.$theme.colors[row[1]],
          color: index > 1 ? 'white' : 'black',
        };
      });
      return (
        <StyledRow key={index}>
          <StyledColorCellOld>{row[0]}</StyledColorCellOld>
          <StyledColorCellNew>{row[1]}</StyledColorCellNew>
        </StyledRow>
      );
    })}
  </StyledBody>
</StyledTable>

Here is an example of updating direct usage of grays from the theme object:

```jsx
// OLD, mono200 is #F7F7F7 and mono800 is #666666
const StyledFoo = styled('div', props => ({
  color: props.$theme.colors.mono800,
  backgroundColor: props.$theme.colors.mono200,
}));

// NEW, mono50 is #F6F6F6 and mono600 is #545454
// these aren't exact, but the nearest values in the new scale
const StyledFoo = styled('div', props => ({
  color: props.$theme.colors.mono600,
  backgroundColor: props.$theme.colors.mono50,
}));
```

Or, if you use a `Block` to apply theme values, those will need adjusting as well:

```jsx
// OLD
<Block color="mono200" backgroundColor="mono800" />

// NEW
<Block color="mono50" backgroundColor="mono600" />
```

## Black is the New Blue

The use of `primary` blue has been greatly reduced in favor of `black`. The most noticeable instances of this change are in our buttons and the highlight on various inputs. Here is a list of affected components:

- `Button`
- `ButtonGroup`
- `Input`
- `Textarea`
- `Select`
- `Checkbox`
- `Radio`
- `Slider`
- `Datepicker`
- `FileUploader`
- `Tab`
- `List`
- `ProgressSteps`

We realize these changes may conflict with your app's styles so we've added new theme variables to allow you to easily tweak things as needed.

After updating to **v9** you can use the following [theme variables](/theming/custom-themes) to keep your app looking as it did in **v8**:

### v8 Theme Values

```js
const colors = {
  // Borders
  borderFocus: primitives.primary400,

  // Buttons
  // Primary
  buttonPrimaryFill: primitives.primary400,
  buttonPrimaryText: primitives.white,
  buttonPrimaryHover: primitives.primary500,
  buttonPrimaryActive: primitives.primary600,
  buttonPrimaryDisabledFill: primitives.mono100,
  // Secondary
  buttonSecondaryFill: primitives.primary50,
  buttonSecondaryText: primitives.primary400,
  buttonSecondaryHover: primitives.primary100,
  buttonSecondaryActive: primitives.primary200,
  buttonSecondaryDisabledFill: primitives.mono100,
  // Tertiary
  buttonTertiaryFill: primitives.mono50,
  buttonTertiaryText: primitives.primary400,
  buttonTertiaryHover: primitives.mono100,
  buttonTertiaryActive: primitives.mono200,
  buttonTertiaryDisabledFill: primitives.mono100,
  // Minimal
  buttonMinimalFill: 'transparent',
  buttonMinimalText: primitives.primary400,
  buttonMinimalHover: primitives.mono50,
  buttonMinimalActive: primitives.mono100,
  buttonMinimalDisabledFill: primitives.mono100,

  // Button Group
  buttonGroupSelectedFill: primitives.primary400,
  buttonGroupSelectedText: primitives.white,

  // Tick
  tickFillSelected: primitives.primary400,
  tickFillSelectedHover: primitives.primary500,
  tickFillSelectedHoverActive: primitives.primary600,

  // Slider
  sliderFill: primitives.primary400,
  sliderHandleInnerFillSelectedHover: primitives.primary400,
  sliderHandleInnerFillSelectedActive: primitives.primary500,

  // Calendar
  calendarBackground: primitives.white,
  calendarForeground: primitives.black,
  calendarForegroundDisabled: primitives.mono300,
  calendarHeaderBackground: primitives.primary400,
  calendarHeaderForeground: primitives.white,
  calendarHeaderBackgroundActive: primitives.primary500,
  calendarHeaderForegroundDisabled: primitives.primary200,
  calendarDayBackgroundPseudoSelected: primitives.primary100,
  calendarDayForegroundPseudoSelected: primitives.black,
  calendarDayBackgroundPseudoSelectedHighlighted: primitives.primary200,
  calendarDayForegroundPseudoSelectedHighlighted: primitives.black,
  calendarDayBackgroundSelected: primitives.primary400,
  calendarDayForegroundSelected: primitives.white,
  calendarDayBackgroundSelectedHighlighted: primitives.primary500,
  calendarDayForegroundSelectedHighlighted: primitives.white,

  // Progress Steps
  progressCompletedLine: primitives.primary400,
  progressCompletedNodeBackground: primitives.primary400,
  progressCompletedNodeForeground: primitives.white,
  progressActiveNodeBackground: primitives.primary100,
  progressActiveNodeForeground: primitives.primary400,
};
```

That's a lot of stuff, so let's break down some of the changes in more detail...

### Border Focus

The default highlight for focus is now `black` in the light theme and `white` in the dark theme. You can adjust the `borderFocus` theme property back to `primary` or whatever you like.

### Button

The `Button` component has various `kind` values that change the coloring. The default button kinds now use a gray-scale rather than variations on the `primary` blue color.

### Button Group

The `ButtonGroup` component has been updated to use buttons with `kind={KIND.secondary}` rather than the previous `tertiary`. If you still want to use `tertiary` you can now use `kind` as a top-level prop on `ButtonGroup`:

```jsx
<ButtonGroup kind={KIND.tertiary} />
```

This will set the children buttons to whatever kind you have passed to `ButtonGroup`.

A note on `selected` styling: If the buttons are `tertiary` or `secondary`, `buttonGroupSelectedFill` and `buttonGroupSelectedText` will be used to style the selected button. If the type is `primary`, the default styling is the `active` state of your `primary` button.

### Minimal Button

We are deprecating the `minimal` button. `tertiary` now serves the same purpose and so the two are redundant. We haven't removed the option yet to avoid breaking your code, so you can still set your buttons to `kind={KIND.minimal}` and use theme variables to style them uniquely. We encourage you to use `tertiary` going forward instead, however, as the `minimal` button may be removed in a future major.

### Calendar

The `Calendar` component now has a mostly monotone color palette. Thankfully, there are a lot of new theme variables for styling it. In the past, this required some tricky overriding to style correctly- the new theme variables should allow you to adjust the styles easily.

## Typography

The default typography values included in our theme have been adjusted. The overall scale has shifted upwards, so for instance, `font200` is now `14px` rather than `12px`.

Here is a mapping of the old and new values:

### Typography Updates

<Table
  columns={['Type', 'Old', 'New', 'Purpose']}
  data={[
    [`font100`, `11/16/400`, `12/20/400`, `Paragraph, Caption, Label`],
    [`font150`, `-`, `12/20/500`, `Paragraph, Caption, Label`],
    [`font200`, `12/20/400`, `14/20/400`, `Paragraph, Label`],
    [`font250`, `12/20/500`, `14/20/500`, `Paragraph, Label`],
    [`font300`, `14/20/400`, `16/24/400`, `Paragraph, Label`],
    [`font350`, `14/20/500`, `16/24/500`, `Paragraph, Label`],
    [`font400`, `16/24/400`, `18/28/400`, `Paragraph, Label`],
    [`font450`, `16/24/500`, `18/28/500`, `Paragraph, Label`],
    [`font460`, `18/24/400`, `20/28/500`, `Header`],
    [`font470`, `18/24/500`, `24/32/500`, `Header`],
    [`font500`, `20/28/500`, `28/36/500`, `Header`],
    [`font600`, `24/36/500`, `32/40/500`, `Header`],
    [`font700`, `32/48/500`, `36/44/500`, `Header`],
    [`font800`, `40/56/500`, `40/52/500`, `Header`],
    [`font900`, `52/68/500`, `36/44/500`, `Display`],
    [`font1000`, `72/68/400`, `44/52/500`, `Display`],
    [`font1100`, `96/116/400`, `52/64/500`, `Display`],
    [`font1200`, `-`, `96/112/500`, `Display`],
  ]}
/>

Notice that there are now four **Display** values. At Uber, we use these with a different font family as alternate typography for certain headings. One side-effect of this is that the scale no longer consistently correlates "higher" font values with larger font sizes. For example, the Display values start at `font900` with a `font-size: 36px`, even though `font800` has a `font-size: 40px`.

The following is a suggested mapping of old to new theme variables based on the closest matching size:

### Typography Mapping

<Table
  columns={['Old', 'New']}
  data={[
    [`font100`, `font100`],
    [`font200`, `font100`],
    [`font250`, `font150`],
    [`font300`, `font200`],
    [`font350`, `font250`],
    [`font400`, `font300`],
    [`font450`, `font350`],
    [`font460`, `font400`],
    [`font470`, `font450`],
    [`font500`, `font460`],
    [`font600`, `font470`],
    [`font700`, `font600`],
    [`font800`, `font800`],
    [`font900`, `font1100`],
    [`font1000`, `font1100`],
    [`font1100`, `font1200`],
  ]}
/>

All of Base Web's components have been adjusted to use these new values, so you will only have to update your code in places you have used theme typography properties directly:

```jsx
// old
// font300 used to return 14px/20px/400
const StyledFoo = styled('div', props => ({
  ...props.$theme.typography.font300,
}));

// new
// font200 now returns 14px/20px/400
const StyledFoo = styled('div', props => ({
  ...props.$theme.typography.font200,
}));
```

If you use the `Block` component to apply theme font properties, you will need to adjust those as well:

```jsx
// old
<Block font="font300" />

// new
<Block font="font200" />
```

#### Typography Components

There has also been a small but important update to a few of the typography components. `Paragraph` and `Label` used to increase in font size as the digit suffix increased, as opposed to various header components (`H1`, `H2`, etc). This has been changed so that all of the typography components _decrease_ in size as the suffix increases, to stay consistent with the header (`h1`) pattern in HTML.

<Table
  columns={['Old', 'New']}
  data={[
    [`Paragraph1`, `Paragraph2`],
    [`Paragraph2`, `Paragraph1`],
    [`Label1`, `Label2`],
    [`Label2`, `Label1`],
  ]}
/>

## Reasoning

Some folks may wonder why there is a noticeable stylistic update coming to Base Web. Aren't most components already implemented?

It is important to remember that Uber's Base design system is still evolving. The Base Web library has an ever-moving target ahead of it. Style changes are, at this point, a constant reality for the project.

We on the Base Web team consider this one of the main features of Base Web. Folks who use the Base design system, as Uber does on hundreds of projects, know that by staying on the latest version of `baseui`, their app remains on-brand and consistent with other products.

We have tried to make it an easy transition to **v9**. There are no backward-incompatible changes from an API perspective, so your project, even if it looks different, should not throw any novel errors from these updates. Additionally, the new theme variables provided allow you to "undo" any style changes that you don't like.

That said, we hope you _do_ like the changes. ðŸ¤ž

---

<Caption>
  Feel free to reach out to us on our Slack channel or through a GitHub issue if
  you think something is missing from this migration guide.
</Caption>
